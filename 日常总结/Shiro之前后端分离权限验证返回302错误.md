# Shiroä¹‹å‰åç«¯åˆ†ç¦»æƒé™éªŒè¯è¿”å›302é”™è¯¯

> èƒŒæ™¯ï¼šåœ¨è§£å†³äº†ä¸Šä¸€ä¸ª `shiro cas-client` ç«¯ç™»å½•é‡å¤é‡å®šå‘é—®é¢˜åï¼Œè·³è½¬åˆ°é¦–é¡µåï¼Œå‰ç«¯é™¤äº†é™æ€èµ„æºçš„ `http status` è¿”å› **200** å¤–ï¼Œå…¶ä»–è¯·æ±‚åç«¯æœåŠ¡çš„æ¥å£å…¨éƒ¨éƒ½è¿”å› **302 Found**ã€‚

**302 Found**æ˜¯ç”±äºè¯·æ±‚çš„èµ„æºè¢«é‡å®šå‘åè¿”å›çš„ï¼Œåœ¨æœ¬é¡¹ç›®ä¸­ï¼Œå¤§éƒ¨åˆ†(å¯ä»¥è¯´ï¼Œ**99%** ä»¥ä¸Šéƒ½æ˜¯å› ä¸º `shiro` æ¡†æ¶éªŒè¯ç™»å½•å¯¼è‡´çš„)ï¼Œä¹‹å‰ä¸ºæ­¤è§£å†³äº† `OPTIONS` è¯·æ±‚ä¸æ£€éªŒç™»å½•æ€çš„é—®é¢˜ã€‚

é€šè¿‡ `debug`ï¼Œåœ¨ `org.apache.coyote.Response#setStatus` **line 194**å¤„æ‰“äº†æ–­ç‚¹åï¼Œå‘ç° `http status` **302** è®¾ç½®æ˜¯åœ¨ æ–¹æ³• `org.apache.catalina.connector.Response#sendRedirect` **line 1334**å¤„è®¾ç½®çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š<br/>

```java
public static final int SC_FOUND = 302

@Override
public void sendRedirect(String location) throws IOException {
    sendRedirect(location, SC_FOUND);
}
```

å…¶æ–¹æ³•æ˜¯ `spring mvc` é»˜è®¤è°ƒç”¨çš„ã€‚



ä¸‹é¢æ˜¯åœ¨ç½‘ä¸Šå¯¹è¿™ä¸ªé—®é¢˜è§£å†³æ¯”è¾ƒæœ‰å‡†å¯¹æ€§çš„å‡ ä¸ªé“¾æ¥ï¼š

- [springBootå‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­shiroçš„302è·³è½¬](https://blog.csdn.net/qq_27521215/article/details/81195634)
- [shiroå¼•å‘çš„é—®é¢˜ï¼ˆ302 Foundï¼‰](https://blog.csdn.net/leaves_story/article/details/79913012)



æœ€åï¼Œè¯´ä¸€ä¸‹æœ¬é¡¹ç›®ä¸­ **302** é—®é¢˜çš„åŸå› ã€‚åŸå› å¾ˆç®€å•ï¼Œæ—¢ä¸æ˜¯å‰ç«¯çš„é”…ï¼Œä¹Ÿä¸æ˜¯åç«¯çš„é”…ã€‚

![ç™»å½•æˆåŠŸåçš„cookie](images/image-20190414171219210.png)

å‰ç«¯è¯·æ±‚å†™æ­»äº†ä¸€ä¸ª `ip`ï¼Œä½†æ˜¯ç­‰ä½¿ç”¨çš„æ˜¯åŸŸåï¼Œæ‰€ä»¥å¢åŠ äº†ä¸¤ä¸ªä¸åŒåŸŸåçš„ `cookie`ã€‚

åŸŸåå¯¹åº” `cookie` åœ¨ `redis` ç¼“å­˜ä¸­çš„ç»“æœã€‚å¦‚ä¸‹ï¼š<br/>![åŸŸåå¯¹åº” `cookie` åœ¨ `redis` ç¼“å­˜ä¸­çš„ç»“æœ](images/image-20190414171353893.png)



`ip` å¯¹åº”çš„ `cookie` åœ¨ `redis` ç¼“å­˜ä¸­çš„ç»“æœã€‚å¦‚ä¸‹ï¼š<br/>

![`ip` å¯¹åº”çš„ `cookie` åœ¨ `redis` ç¼“å­˜ä¸­çš„ç»“æœ](images/image-20190414171540902.png)



é—®é¢˜å¾…æ˜å¤©ç¡®è®¤è§£å†³ã€‚ğŸ˜„ğŸ˜„